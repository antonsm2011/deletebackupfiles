Библиотека для удаления устаревших резервных копий.
Основные возможности:
    Удаление резервных копий по истечению периода хранения,
    Обязательное хранение минимального количества резервных копий,
    Логирование действий,
    Режим "Без удаления резервных копий",
    Сборка независимого исполняемого файла.

Сборка независимого исполняемого файла пока не работает из-за особенностей OneScript.

Алгоритм работы:
    Создается файл настроек.
    В файле настроек описываются настройки и задания для выполнения:
        Настройка "БезУдаленияРезервныхКопий", если установлено значение true, тогда резервные копии не удаляются, только выводятся в лог резервные копии к удалению.
        Перечисление заданий для выполнения:
            Каталог - каталог хранения резервных копий, чтение вложенных каталогов не выполняется,
            МаскаФайлов - маска для поиска файлов резервных копий, будут анализироваться только файлы, удовлетворяющие маске,
            МинимальноеКоличествоРезервныхКопий - минимальное количество хранимых резервных копий, меньше этого количества не будет удалено резервных копий,
            ПериодХраненияРезервныхКопий - период хранения резервных копий в днях: 0 - будут удалены все резервные копии, 1 - будут сохранены только копии от текущей даты. Дата резервной копии определяется по дате изменения файла.
        При заполнении настроек заданий важно соблюдать формат [ИмяЗадания].[ИмяНастройки]. При чтении настроек заданий они будут сгруппированы по имени задания. Вложенность настроек не учитывается.
    Запускается исполняемый файл, использующий библиотеку.

Пример файла настроек:
{
    "БезУдаленияРезервныхКопий": true,
    "fullbackups":
    {
        "fullbackups.Каталог": "d:\\full",
        "fullbackups.МаскаФайлов": "full_*",
        "fullbackups.МинимальноеКоличествоРезервныхКопий": 4,
        "fullbackups.ПериодХраненияРезервныхКопий": 31
    },
    "diffbackups":
    {
        "diffbackups.Каталог": "d:\\diff",
        "diffbackups.МаскаФайлов": "diff_*",
        "diffbackups.МинимальноеКоличествоРезервныхКопий": 14,
        "diffbackups.ПериодХраненияРезервныхКопий": 14
    }
}

Пример исполняемого файла:

#Использовать "..\delete_backup_files" // Путь к библиотеке.

Попытка
	// Чтение настроек из файла "settings.json" (файл по умолчанию), расположенного в текущем каталоге скрипта.
	УдалениеФайловРезервныхКопий.ПрочитатьНастройки();
	
	УдалениеФайловРезервныхКопий.ЗаполнитьЗаданияИзНастроек();
	
	УдалениеФайловРезервныхКопий.УдалитьУстаревшиеРезервныеКопии();
Исключение
	Сообщить("Ошибка удаления устаревших резервных копий!");
КонецПопытки;

Больше примеров в каталоге examples.


Планы: 
    Проверка на заполнение необходимых настроек заданий. Сделано.
    Проверка на существование каталога с резервными копиям. Сделано.
    Проверка на тип: файл или каталог. Сделано.
    Использование регулярных выражений при поиске резервных копий по маске.
    Определение даты резервной копии по формату имени файла.